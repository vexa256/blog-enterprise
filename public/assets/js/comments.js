/*! For license information please see comments.js.LICENSE.txt */
(self.webpackChunkbuzzy=self.webpackChunkbuzzy||[]).push([[499],{367:function(t,e){var n,o,a;o=[t,e],n=function(t,e){"use strict";var n,o,a="function"==typeof Map?new Map:(n=[],o=[],{has:function(t){return n.indexOf(t)>-1},get:function(t){return o[n.indexOf(t)]},set:function(t,e){-1===n.indexOf(t)&&(n.push(t),o.push(e))},delete:function(t){var e=n.indexOf(t);e>-1&&(n.splice(e,1),o.splice(e,1))}}),r=function(t){return new Event(t,{bubbles:!0})};try{new Event("test")}catch(t){r=function(t){var e=document.createEvent("Event");return e.initEvent(t,!0,!1),e}}function s(t){if(t&&t.nodeName&&"TEXTAREA"===t.nodeName&&!a.has(t)){var e=null,n=null,o=null,s=function(){t.clientWidth!==n&&d()},i=function(e){window.removeEventListener("resize",s,!1),t.removeEventListener("input",d,!1),t.removeEventListener("keyup",d,!1),t.removeEventListener("autosize:destroy",i,!1),t.removeEventListener("autosize:update",d,!1),Object.keys(e).forEach((function(n){t.style[n]=e[n]})),a.delete(t)}.bind(t,{height:t.style.height,resize:t.style.resize,overflowY:t.style.overflowY,overflowX:t.style.overflowX,wordWrap:t.style.wordWrap});t.addEventListener("autosize:destroy",i,!1),"onpropertychange"in t&&"oninput"in t&&t.addEventListener("keyup",d,!1),window.addEventListener("resize",s,!1),t.addEventListener("input",d,!1),t.addEventListener("autosize:update",d,!1),t.style.overflowX="hidden",t.style.wordWrap="break-word",a.set(t,{destroy:i,update:d}),l()}function l(){var n=window.getComputedStyle(t,null);"vertical"===n.resize?t.style.resize="none":"both"===n.resize&&(t.style.resize="horizontal"),e="content-box"===n.boxSizing?-(parseFloat(n.paddingTop)+parseFloat(n.paddingBottom)):parseFloat(n.borderTopWidth)+parseFloat(n.borderBottomWidth),isNaN(e)&&(e=0),d()}function c(e){var n=t.style.width;t.style.width="0px",t.offsetWidth,t.style.width=n,t.style.overflowY=e}function u(t){for(var e=[];t&&t.parentNode&&t.parentNode instanceof Element;)t.parentNode.scrollTop&&e.push({node:t.parentNode,scrollTop:t.parentNode.scrollTop}),t=t.parentNode;return e}function m(){if(0!==t.scrollHeight){var o=u(t),a=document.documentElement&&document.documentElement.scrollTop;t.style.height="",t.style.height=t.scrollHeight+e+"px",n=t.clientWidth,o.forEach((function(t){t.node.scrollTop=t.scrollTop})),a&&(document.documentElement.scrollTop=a)}}function d(){m();var e=Math.round(parseFloat(t.style.height)),n=window.getComputedStyle(t,null),a="content-box"===n.boxSizing?Math.round(parseFloat(n.height)):t.offsetHeight;if(a<e?"hidden"===n.overflowY&&(c("scroll"),m(),a="content-box"===n.boxSizing?Math.round(parseFloat(window.getComputedStyle(t,null).height)):t.offsetHeight):"hidden"!==n.overflowY&&(c("hidden"),m(),a="content-box"===n.boxSizing?Math.round(parseFloat(window.getComputedStyle(t,null).height)):t.offsetHeight),o!==a){o=a;var s=r("autosize:resized");try{t.dispatchEvent(s)}catch(t){}}}}function i(t){var e=a.get(t);e&&e.destroy()}function l(t){var e=a.get(t);e&&e.update()}var c=null;"undefined"==typeof window||"function"!=typeof window.getComputedStyle?((c=function(t){return t}).destroy=function(t){return t},c.update=function(t){return t}):((c=function(t,e){return t&&Array.prototype.forEach.call(t.length?t:[t],(function(t){return s(t,e)})),t}).destroy=function(t){return t&&Array.prototype.forEach.call(t.length?t:[t],i),t},c.update=function(t){return t&&Array.prototype.forEach.call(t.length?t:[t],l),t}),e.default=c,t.exports=e.default},void 0===(a="function"==typeof n?n.apply(e,o):n)||(t.exports=a)},764:(t,e,n)=>{"use strict";var o=n(367),a=n.n(o);!function(t,e,n){var o=null;function r(t){swal({title:CommentsVar.lang.Error,text:t,type:"error",confirmButtonText:CommentsVar.lang.Ok}),"undefined"!=typeof grecaptcha&&grecaptcha.reset()}function s(t){swal({title:CommentsVar.lang.Success,text:t,type:"success",confirmButtonText:CommentsVar.lang.Ok})}function i(e){t(e).addClass("loading")}function l(e){t(e).removeClass("loading")}function c(e){if(null!==o)return!1;var n=t(e).data("target"),a=t(e).data("prepend"),i=t(e).find("textarea[name=comment_text]").val(),l=t(e).find("input[name=spoiler]:checked").val(),c=t(e).find("input[name=parent_id]").val()||"";t(e).addClass("form-active");var u=t(e).find("input[name=user_username]").val(),m=t(e).find("input[name=user_email]").val(),f=t(e).find(".g-recaptcha-response").val();n||(n="#comments_list"+c),o=t.post(CommentsVar.ajax,Object.assign({},CommentsVar.requestData,{comment:i,parent_id:c?parseInt(c):null,spoiler:l,user_username:u,user_email:m,"g-recaptcha-response":f,type:"addcomment"}),(function(o){"error"===o.status?r(o.message):(t(".no-comment").remove(),"yes"===a?t(n).prepend(o.html):t(n).append(o.html),t(e).find("[name=comment_text]").val(""),o.message&&s(o.message),t(".add-comment").find("textarea.comment_text").val(""),t(".add-subcomment").hide(),t(".add-comment-form-actions").hide(),d())}),"json").fail((function(e,n,o){var a=e.responseJSON;if(void 0!==a.errors){var s="";t.each(a.errors,(function(t,e){s+=e[0]+"\n"})),r(s)}else r(a.message)})).always((function(){o=null,t(e).removeClass("form-active")}))}function u(e,n,a){if(null!==o)return!1;i(a),o=t.get(CommentsVar.ajax,Object.assign({},CommentsVar.requestData,{page:e,sort:n}),(function(e){"error"===e.status?r(e.message):t(a).html(e.html),d()}),"json").fail((function(t,e,n){r(n)})).always((function(){o=null,l(a)}))}function m(e){void 0===e&&(e=t("#comments")),t(e).on("click",".comment_vote",(function(e){e.preventDefault(),function(e,n){if(null!==o)return!1;o=t.post(CommentsVar.ajax+"/"+parseInt(e)+"/vote",Object.assign({},CommentsVar.requestData,{comment_id:parseInt(e),vote:n}),(function(o){if("error"===o.status)r(o.message);else{var a=n?"like":"dislike";t("#"+a+"_"+e).text(parseInt(t("#"+a+"_"+e).text())+1),o.message&&s(o.message)}}),"json").fail((function(t,e,n){r(n)})).always((function(){o=null}))}(t(this).data("id"),t(this).data("type"))})),t(e).on("click",".delete_comment",(function(e){e.preventDefault();var n=t(this).data("id"),a=t(this).data("confirm");confirm(a)&&function(e){if(null!==o)return!1;t("#comment"+e).css("opacity","0.5"),o=t.ajax({url:CommentsVar.ajax+"/"+e,data:CommentsVar.requestData,type:"DELETE"}).done((function(n){"error"===n.status?r(n.message):t("#comment"+e).remove()})).fail((function(t,e,n){swal.showInputError(n)})).always((function(){o=null,t("#comment"+e).css("opacity","1")}))}(n)})),t(e).on("click",".edit_comment",(function(e){e.preventDefault(),function(e){if(null!==o)return!1;var n=t("#comment"+e).find(".comment-text-p p").first(),a=n.text();swal({title:CommentsVar.lang.EditComment,text:'<textarea id="comment-edit-input" class="form-control" rows="5">'+a+"</textarea>",showCancelButton:!0,closeOnConfirm:!1,animation:"slide-from-top",html:!0,confirmButtonText:CommentsVar.lang.Edit,cancelButtonText:CommentsVar.lang.Cancel},(function(){o=t.ajax({url:CommentsVar.ajax+"/"+e,data:Object.assign({},CommentsVar.requestData,{comment:t("#comment-edit-input").val()}),type:"PUT"}).done((function(t){"error"===t.status?swal.showInputError(t.message):(n.html(t.html),swal({title:"",timer:10}))})).fail((function(t,e,n){swal.showInputError(n)})).always((function(){o=null}))}))}(t(this).data("id"))})),t(e).on("click",".report_comment",(function(e){e.preventDefault(),function(e){if(null!==o)return!1;swal({title:CommentsVar.lang.ReportComment,type:"input",showCancelButton:!0,closeOnConfirm:!1,animation:"slide-from-top",html:!0,inputPlaceholder:CommentsVar.lang.ReportPlaceholder,confirmButtonText:CommentsVar.lang.Report,cancelButtonText:CommentsVar.lang.Cancel},(function(n){return!1!==n&&(""===n?(swal.showInputError(CommentsVar.lang.WriteSomething),!1):void(o=t.ajax({url:CommentsVar.ajax+"/"+e+"/report",data:Object.assign({},CommentsVar.requestData,{body:n}),type:"POST"}).done((function(t){"error"===t.status?swal.showInputError(t.message):swal({title:t.message,type:"success",html:!0,timer:2e3})})).fail((function(t,e,n){swal.showInputError(n)})).always((function(){o=null}))))}))}(t(this).data("id"))})),t(e).on("click",".comment-spoiler-text",(function(e){e.preventDefault(),t(this).parent().removeClass("spoiler-content")})),t(e).on("click",".comment_open_reply_form",(function(e){e.preventDefault(),t(".add-subcomment").hide();var n=t(this).data("id"),o=t(this).data("to");t("#open_add_subcomment_"+n).show();var a=t("#open_add_subcomment_"+n).find("textarea.comment_text"),r=a.val();!r&&o&&CommentsVar.settings.useUserTags&&(r="@"+o+", "),a.val(r).trigger("focus")})),t(e).on("click",".pagination li a",(function(e){e.preventDefault();var n=t(this).attr("href").split("page=")[1],o=t(".short a.active").attr("data-desc");u(parseInt(n),o,"#comments_list")}))}function d(){t(".add-comment-form textarea").each((function(){t(this).hasClass("inited")||(t(this).addClass("inited"),a()(t(this)))})),CommentsVar.settings.useUserTags&&t(".comment").each((function(){var e=t(this),n=e.find(".comment-text-p p");if(e.parents(".comment").length>0){var o=e.find(".comment_user_info"),a=o.text().trim(),r=o.attr("href");n.html((function(t,e){return e.replace("@"+a,'<a href="'+r+'" target="_blank" class="reply_user comment_user_info">@'+a+"</a>")}))}}))}function f(e){void 0===e&&(e=t("#comments-wrapper")),d(),t(e).on("click",".add_new_comment",(function(e){e.preventDefault(),c(t(this).parents("form"))})),t(e).on("click",".load_more_replies",(function(e){e.preventDefault(),function(e){if(null!==o)return!1;var n=t(e).parent();i(n);var a=t(e).data("id"),s=t(e).data("page")||2,c="#comments_list"+a;s=parseInt(s),t(e).data("page",s+1),o=t.get(CommentsVar.ajax+"/"+a+"/replies",Object.assign({},CommentsVar.requestData,{page:s}),(function(n){"error"===n.status?r(n.message):(t(c).append(n.html),n.moreExist||t(e).remove())}),"json").fail((function(t,e,n){r(n)})).always((function(){o=null,l(n)}))}(this)})),t(e).on("click",".comment_text",(function(e){e.preventDefault(),t(this).next(".add-comment-form-actions").show()}))}t(e).on("load",(function(){var e;void 0===e&&(e=t("body")),t(e).on("click",".comment_sort a",(function(e){if(t(this).hasClass("active"))return!1;e.preventDefault(),t(".comment_sort a").removeClass("active"),t(this).addClass("active"),u(1,t(this).data("sort"),"#comments_list")})),f(),m()}))}(n(755),window,document)}},t=>{t.O(0,[898],(()=>{return e=764,t(t.s=e);var e}));t.O()}]);